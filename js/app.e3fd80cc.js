(function(e){function t(t){for(var a,o,l=t[0],s=t[1],c=t[2],p=0,m=[];p<l.length;p++)o=l[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,l=1;l<r.length;l++){var s=r[l];0!==n[s]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},i=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("64a9"),n=r.n(a);n.a},1:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d"),r("0fae");var a=r("2b0e"),n=r("5c96"),i=r.n(n),o=r("28dd"),l=r("a1fc"),s=r.n(l),c=r("755e"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",[r("el-main",[r("SignupForm")],1)],1)},p=[],m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-row",[r("el-col",[r("h1",{staticClass:"h1"},[e._v("Brokalys pingeris")]),r("p",[e._v("\n      Aizpildi formu un saņem paziņojumus e-pastā par jauniem nekustamā\n      īpašuma sludinājumiem.\n    ")]),r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"left",disabled:e.loading}},[r("el-form-item",{attrs:{label:"E-pasta adrese",prop:"email"}},[r("el-col",{attrs:{span:11}},[r("el-input",{attrs:{placeholder:"demo@brokalys.com","suffix-icon":"el-icon-message"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),r("el-row",[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"Nekustamā īpašuma tips",prop:"category"}},[r("el-select",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[r("el-option",{attrs:{label:"Dzīvoklis",value:"apartment"}}),r("el-option",{attrs:{label:"Māja",value:"house"}}),r("el-option",{attrs:{label:"Zeme",value:"land"}})],1)],1)],1),r("el-col",{attrs:{span:11,offset:2}},[r("el-form-item",{attrs:{label:"Darījuma veids",prop:"type"}},[r("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-option",{attrs:{label:"Pārdod",value:"sell"}}),r("el-option",{attrs:{label:"Īrē",value:"rent"}})],1)],1)],1)],1),r("el-form-item",{attrs:{label:"Cena (no, līdz)",required:""}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"price_min"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.price_min,callback:function(t){e.$set(e.form,"price_min",e._n(t))},expression:"form.price_min"}},[r("template",{slot:"append"},[e._v("EUR")])],2)],1)],1),r("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{prop:"price_max"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.price_max,callback:function(t){e.$set(e.form,"price_max",e._n(t))},expression:"form.price_max"}},[r("template",{slot:"append"},[e._v("EUR")])],2)],1)],1)],1),r("el-form-item",{attrs:{label:"Reģions",required:""}},[r("el-col",[r("gmap-map",{ref:"map",staticStyle:{width:"100%",height:"300px"},attrs:{center:e.center,zoom:10}},[r("gmap-polygon",{ref:"polygon",attrs:{paths:e.paths,editable:!0},on:{paths_changed:function(t){return e.updateEdited(t)},rightclick:e.handleClickForDelete}})],1)],1)],1),r("el-form-item",{attrs:{label:"Komentāri",prop:"comments"}},[r("el-col",[r("el-input",{attrs:{type:"textarea",placeholder:"Ieteikumi, atsauksmes","suffix-icon":"el-icon-message"},model:{value:e.form.comments,callback:function(t){e.$set(e.form,"comments",t)},expression:"form.comments"}})],1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v("\n          Saņemt nek.īp. paziņojumus\n        ")])],1)],1)],1)],1)},f=[];function g(e){return e.concat(e.slice(0,1))}var d={name:"SignupForm",data:function(){var e=this,t=function(t,r,a){return r?e.form.price_min>=r?a(new Error("Cenai /līdz/ ir jābūt mazākai par cenu /no/.")):a():a(new Error("Šis lauciņš ir obligāti aizpildāms."))};return{center:{lat:56.98,lng:24.105078},paths:[[{lng:24.1366192486729,lat:56.9922942350075},{lng:23.995789971634395,lat:56.976393666616254},{lng:24.005336060806712,lat:56.92490408641493},{lng:24.108466782852588,lat:56.889287904181955},{lng:24.291935029312526,lat:56.93221057479092},{lng:24.24517618684422,lat:56.99650208638349},{lng:24.1366192486729,lat:56.9922942350075}]],mvcPaths:null,loading:!1,form:{email:"",category:"apartment",type:"sell",price_min:"",price_max:"",optin:!1},rules:{email:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"},{type:"email",message:"Pārbaudi e-pasta adresi.",trigger:"blur"}],category:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"}],type:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"}],price_min:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"},{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus.",trigger:"blur"}],price_max:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"},{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus.",trigger:"blur"},{validator:t,trigger:"blur"}]}}},watch:{polygonPaths:function(e){e&&(this.paths=e,this.polygonGeojson=JSON.stringify({type:"Polygon",coordinates:this.paths.map(function(e){return g(e.map(function(e){var t=e.lat,r=e.lng;return[r,t]}))})},null,2))}},computed:{polygonPaths:function(){if(!this.mvcPaths)return null;for(var e=[],t=0;t<this.mvcPaths.getLength();t++){for(var r=[],a=0;a<this.mvcPaths.getAt(t).getLength();a++){var n=this.mvcPaths.getAt(t).getAt(a);r.push({lat:n.lat(),lng:n.lng()})}e.push(r)}return e}},methods:{submitForm:function(){var e=this;this.$refs.form.validate(function(t){if(!1!==t){var r=e.paths[0].slice(0,-1),a=r.map(function(e){return"".concat(e.lat.toFixed(6)," ").concat(e.lng.toFixed(6))});e.loading=!0,e.$http.post("https://api.brokalys.com/",{query:'mutation {\n              createPinger(\n                email: "'.concat(e.form.email,'",\n                category: ').concat(e.form.category.toUpperCase(),",\n                type: ").concat(e.form.type.toUpperCase(),",\n                price_min: ").concat(e.form.price_min,",\n                price_max: ").concat(e.form.price_max,",\n                ").concat(e.form.comments?"comments: ".concat(JSON.stringify(e.form.comments),","):"",'\n                region: "').concat(a.join(", "),'"\n              )\n            }')}).then(function(t){if(t.body.errors)throw t;e.loading=!1,e.$message({message:"Turpmāk e-pastā saņemsi NĪ paziņojumus, kas atbilst tevis izvēlētajiem kritērijiem.",type:"success",duration:2e4})}).catch(function(t){e.loading=!1,e.$message({message:"Oops, kaut kas nogāja greizi. Centīsimies atrisināt problēmu tuvākajā laikā.",type:"error",duration:2e4}),window.bugsnagClient&&(window.bugsnagClient.metaData={response:t},window.bugsnagClient.notify("Unexpected error occurred when creating a new pinger."))})}})},updateEdited:function(e){this.mvcPaths=e},handleClickForDelete:function(e){e.vertex&&this.$refs.polygon.$polygonObject.getPaths().getAt(e.path).removeAt(e.vertex)}}},b=d,h=(r("8afd"),r("2877")),v=Object(h["a"])(b,m,f,!1,null,null,null),y=v.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("\n  Hello\n")])},k=[],w={name:"SideMenu"},x=w,j=Object(h["a"])(x,_,k,!1,null,null,null),P=j.exports,z={name:"App",components:{SignupForm:y,SideMenu:P}},O=z,$=(r("034f"),Object(h["a"])(O,u,p,!1,null,null,null)),C=$.exports;a["default"].config.productionTip=!1,window.bugsnagClient&&window.bugsnagClient.use(s()(a["default"])),a["default"].use(i.a),a["default"].use(o["a"]),a["default"].use(c,{load:{key:"AIzaSyADke6h-GKt5dPB8IcjVeQ0lAaC1wL_LwY"}}),new a["default"]({render:function(e){return e(C)},components:{App:C}}).$mount("#app")},"64a9":function(e,t,r){},"8afd":function(e,t,r){"use strict";var a=r("babd"),n=r.n(a);n.a},babd:function(e,t,r){}});
//# sourceMappingURL=app.e3fd80cc.js.map