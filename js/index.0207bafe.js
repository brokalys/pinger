(function(e){function t(t){for(var r,l,s=t[0],n=t[1],m=t[2],u=0,c=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&c.push(i[l][0]),i[l]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);p&&p(t);while(c.length)c.shift()();return o.push.apply(o,m||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,s=1;s<a.length;s++){var n=a[s];0!==i[n]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},i={index:0},o=[];function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],n=s.push.bind(s);s.push=t,s=s.slice();for(var m=0;m<s.length;m++)t(s[m]);var p=n;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var r=a("85ec"),i=a.n(r);i.a},1:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("0fae");var r=a("2b0e"),i=a("5c96"),o=a.n(i),l=a("28dd"),s=a("755e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("SignupForm")],1)],1)},m=[],p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",[a("h1",{staticClass:"h1"},[e._v("Brokalys pingeris")]),a("p",[e._v(" Aizpildi formu un saņem paziņojumus e-pastā par jauniem nekustamā īpašuma sludinājumiem. ")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"left",disabled:e.loading}},[a("el-form-item",{attrs:{label:"E-pasta adrese",prop:"email"}},[a("el-col",{attrs:{span:11}},[a("el-input",{attrs:{placeholder:"demo@brokalys.com","suffix-icon":"el-icon-message"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),a("el-row",[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"Nekustamā īpašuma tips",prop:"category"}},[a("el-select",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[a("el-option",{attrs:{label:"Dzīvoklis",value:"apartment"}}),a("el-option",{attrs:{label:"Māja",value:"house"}}),a("el-option",{attrs:{label:"Zeme",value:"land"}})],1)],1)],1),a("el-col",{attrs:{span:11,offset:2}},[a("el-form-item",{attrs:{label:"Darījuma veids",prop:"type"}},[a("el-select",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"Pārdod",value:"sell"}}),a("el-option",{attrs:{label:"Īrē",value:"rent"}})],1)],1)],1)],1),a("el-form-item",{attrs:{label:"Cena (no, līdz)",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"price_min"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.price_min,callback:function(t){e.$set(e.form,"price_min",e._n(t))},expression:"form.price_min"}},[a("template",{slot:"append"},[e._v("EUR")])],2)],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"price_max"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.price_max,callback:function(t){e.$set(e.form,"price_max",e._n(t))},expression:"form.price_max"}},[a("template",{slot:"append"},[e._v("EUR")])],2)],1)],1)],1),a("el-form-item",{attrs:{label:"Istabas (no, līdz)"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"rooms_min"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.rooms_min,callback:function(t){e.$set(e.form,"rooms_min",e._n(t))},expression:"form.rooms_min"}})],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"rooms_max"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.rooms_max,callback:function(t){e.$set(e.form,"rooms_max",e._n(t))},expression:"form.rooms_max"}})],1)],1)],1),a("el-form-item",{attrs:{label:"Platība (no, līdz)"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"area_m2_min"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.area_m2_min,callback:function(t){e.$set(e.form,"area_m2_min",e._n(t))},expression:"form.area_m2_min"}},[a("template",{slot:"append"},[e._v("m2")])],2)],1)],1),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"area_m2_max"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.area_m2_max,callback:function(t){e.$set(e.form,"area_m2_max",e._n(t))},expression:"form.area_m2_max"}},[a("template",{slot:"append"},[e._v("m2")])],2)],1)],1)],1),a("el-form-item",{attrs:{label:"Reģions",required:""}},[a("el-col",[a("gmap-map",{ref:"map",staticStyle:{width:"100%",height:"300px"},attrs:{center:e.center,zoom:10}},[a("gmap-polygon",{ref:"polygon",attrs:{paths:e.paths,editable:!0},on:{paths_changed:function(t){return e.updateEdited(t)},rightclick:e.handleClickForDelete}})],1)],1)],1),a("el-form-item",{attrs:{label:"Komentāri",prop:"comments"}},[a("el-col",[a("el-input",{attrs:{type:"textarea",placeholder:"Ieteikumi, atsauksmes","suffix-icon":"el-icon-message"},model:{value:e.form.comments,callback:function(t){e.$set(e.form,"comments",t)},expression:"form.comments"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm()}}},[e._v(" Saņemt nek.īp. paziņojumus ")])],1)],1)],1)],1)},u=[],c=a("353a"),f=a.n(c),g=a("3181"),d=a.n(g);const _=f()("3291a08204a007079100568b7fa44efc");_.use(d.a,r["default"]);var h=_;function b(e){return e.concat(e.slice(0,1))}var v={name:"SignupForm",data(){const e=e=>(t,a,r)=>a&&this.form[e]>=a?r(new Error("Lauciņam /no/ ir jābūt lielākam par lauciņu /līdz/.")):r();return{center:{lat:56.98,lng:24.105078},paths:[[{lng:24.1366192486729,lat:56.9922942350075},{lng:23.995789971634395,lat:56.976393666616254},{lng:24.005336060806712,lat:56.92490408641493},{lng:24.108466782852588,lat:56.889287904181955},{lng:24.291935029312526,lat:56.93221057479092},{lng:24.24517618684422,lat:56.99650208638349}]],mvcPaths:null,loading:!1,form:{email:"",category:"apartment",type:"sell",price_min:"",price_max:"",rooms_min:null,rooms_max:null,area_m2_min:null,area_m2_max:null,optin:!1},rules:{email:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"},{type:"email",message:"Pārbaudi e-pasta adresi.",trigger:"blur"}],category:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"}],type:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"}],price_min:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"},{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus.",trigger:"blur"}],price_max:[{required:!0,message:"Šis lauciņš ir obligāti aizpildāms.",trigger:"blur"},{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus.",trigger:"blur"},{validator:e("price_min"),trigger:"blur"}],rooms_min:[{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus.",trigger:"blur"}],rooms_max:[{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus.",trigger:"blur"},{validator:e("rooms_min"),trigger:"blur"}],area_m2_min:[{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus.",trigger:"blur"}],area_m2_max:[{type:"integer",message:"Šajā lauciņā var ievadīt tikai skaitļus līdz 100.",trigger:"blur",max:100},{validator:e("area_m2_min"),trigger:"blur"}]}}},watch:{polygonPaths:function(e){e&&(this.paths=e,this.polygonGeojson=JSON.stringify({type:"Polygon",coordinates:this.paths.map(e=>b(e.map(({lat:e,lng:t})=>[t,e])))},null,2))}},computed:{polygonPaths:function(){if(!this.mvcPaths)return null;let e=[];for(let t=0;t<this.mvcPaths.getLength();t++){let a=[];for(let e=0;e<this.mvcPaths.getAt(t).getLength();e++){let r=this.mvcPaths.getAt(t).getAt(e);a.push({lat:r.lat(),lng:r.lng()})}e.push(a)}return e}},methods:{submitForm(){this.$refs.form.validate(e=>{if(!1===e)return;const t=this.paths[0],a=t.map(e=>`${e.lat.toFixed(6)} ${e.lng.toFixed(6)}`);this.loading=!0,this.$http.post("https://api.brokalys.com/",{query:`mutation {\n              createPinger(\n                email: "${this.form.email}",\n                category: ${this.form.category.toUpperCase()},\n                type: ${this.form.type.toUpperCase()},\n                price_min: ${this.form.price_min},\n                price_max: ${this.form.price_max},\n                ${this.form.rooms_min?`rooms_min: ${this.form.rooms_min},`:""}\n                ${this.form.rooms_max?`rooms_max: ${this.form.rooms_max},`:""}\n                ${this.form.area_m2_min?`area_m2_min: ${this.form.area_m2_min},`:""}\n                ${this.form.area_m2_max?`area_m2_max: ${this.form.area_m2_max},`:""}\n                ${this.form.comments?`comments: ${JSON.stringify(this.form.comments)},`:""}\n                region: "${a.join(", ")}"\n              )\n            }`}).then(e=>{if(e.body.errors)throw e;this.loading=!1,this.$message({message:"Turpmāk e-pastā saņemsi NĪ paziņojumus, kas atbilst tevis izvēlētajiem kritērijiem.",type:"success",duration:2e4})}).catch(e=>{this.loading=!1;const{errors:t}=e.data;if(t.length>0&&t[0].extensions.exception&&t[0].extensions.exception.maxPingers){const e=t[0].extensions.exception.maxPingers;this.$message({message:`Diemžēl, vienai e-pasta adresei var pievienot tikai ${e} NĪ paziņojumus.`,type:"error",duration:2e4})}else this.$message({message:"Oops, kaut kas nogāja greizi. Centīsimies atrisināt problēmu tuvākajā laikā.",type:"error",duration:2e4}),h.metaData={response:e},h.notify("Unexpected error occurred when creating a new pinger.")})})},updateEdited(e){this.mvcPaths=e},handleClickForDelete(e){e.vertex&&this.$refs.polygon.$polygonObject.getPaths().getAt(e.path).removeAt(e.vertex)}}},y=v,x=(a("8afd"),a("2877")),k=Object(x["a"])(y,p,u,!1,null,null,null),$=k.exports,j={name:"App",components:{SignupForm:$}},P=j,w=(a("034f"),Object(x["a"])(P,n,m,!1,null,null,null)),z=w.exports;r["default"].config.productionTip=!1,r["default"].use(o.a),r["default"].use(l["a"]),r["default"].use(s,{load:{key:"AIzaSyADke6h-GKt5dPB8IcjVeQ0lAaC1wL_LwY"}}),new r["default"]({render:e=>e(z),components:{App:z}}).$mount("#app")},"85ec":function(e,t,a){},"8afd":function(e,t,a){"use strict";var r=a("e979"),i=a.n(r);i.a},e979:function(e,t,a){}});
//# sourceMappingURL=index.0207bafe.js.map