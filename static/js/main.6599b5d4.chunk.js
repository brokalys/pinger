(this["webpackJsonp@brokalys/pinger-app"]=this["webpackJsonp@brokalys/pinger-app"]||[]).push([[0],{173:function(e,a,n){e.exports={map:"RegionSelector_map__RYekW"}},227:function(e,a,n){e.exports={container:"Home_container__1s89M"}},253:function(e,a,n){},361:function(e,a,n){"use strict";n.r(a);var i=n(60),r=n(0),t=n.n(r),o=n(48),l=n.n(o),m=(n(246),n(217)),d=n(102),c=n.n(d),s=Object(m.a)((function(e){var a=e.graphQLErrors,n=e.networkError;a&&a.forEach((function(e){c.a.notify("[GraphQL error]: Message: ".concat(e.message),(function(a){a.addMetadata("data",e)}))})),n&&c.a.notify("[Network error]: ".concat(n))})),u=new i.HttpLink({uri:"https://api.brokalys.com"}),p=new i.ApolloClient({cache:new i.InMemoryCache,link:Object(i.from)([s,u])}),b=n(220),j=n.n(b),v="3291a08204a007079100568b7fa44efc";c.a.start({apiKey:v,plugins:[new j.a]});var k=c.a.getPlugin("react").createErrorBoundary(t.a),g=(n(253),n(26)),x=n(373),h=n(377),f=n(375),_=n(35),O=n(374),y=n(150),N=n(225),V=n(156);var C={polygonToString:function(e){var a=e.getPath().getArray().map((function(e){return[e.lat().toFixed(6),e.lng().toFixed(6)].join(" ")}));return a.push(a[0]),a.join(", ")},polygonStringToCoords:function(e){var a=e.split(", ").map((function(e){var a=e.split(" "),n=Object(g.a)(a,2),i=n[0],r=n[1];if(void 0===i||void 0===r)throw new Error("Invalid coordinates provided");return{lat:parseFloat(i),lng:parseFloat(r)}}));return a.pop(),a}},T=n(173),S=n.n(T),A=n(7),I={lat:56.94,lng:24.105},w={rotateControl:!1,scaleControl:!1,streetViewControl:!1,panControl:!1,fullscreenControl:!1};function $(e){var a=Object(r.useState)(),n=Object(g.a)(a,2),i=n[0],t=n[1],o=Object(r.useState)((function(){return C.polygonStringToCoords(e.value)})),l=Object(g.a)(o,1)[0],m=Object(V.c)({googleMapsApiKey:"AIzaSyADke6h-GKt5dPB8IcjVeQ0lAaC1wL_LwY"}),d=m.isLoaded,c=m.loadError;function s(){e.onChange(C.polygonToString(i))}return d?c?Object(A.jsxs)(f.a,{negative:!0,children:[Object(A.jsx)(f.a.Header,{children:"Probl\u0113ma iel\u0101d\u0113jot karti"}),Object(A.jsx)("p",{children:"Diem\u017e\u0113l, radusies probl\u0113ma iel\u0101d\u0113jot karti. L\u016bdzu, m\u0113\u0123ini v\u0113lreiz v\u0113l\u0101k."})]}):Object(A.jsx)(V.a,{options:w,mapContainerClassName:S.a.map,center:I,zoom:11,children:Object(A.jsx)(V.b,{draggable:!0,editable:!0,path:l,onLoad:t,onDragEnd:s,onMouseUp:s,onRightClick:function(e){void 0!==e.vertex&&(i.getPath().removeAt(e.vertex),s())}})}):Object(A.jsx)(h.a,{loading:!0,className:S.a.map})}var P=n(54);Object(P.d)({mixed:{required:"\u0160is lauci\u0146\u0161 ir oblig\u0101ti j\u0101aizpilda",notType:"\u0160aj\u0101 lauci\u0146\u0101 nav ievad\u012bta pareiza v\u0113rt\u012bba"},string:{email:"\u0160aj\u0101 lauci\u0146\u0101 j\u0101b\u016bt ievad\u012btai e-pasta adresei",max:"\u0160aj\u0101 lauci\u0146\u0101 dr\u012bkst ievad\u012bt tikai ${max} simbolus"},number:{integer:"\u0160aj\u0101 lauci\u0146\u0101 var ievad\u012bt tikai veselus skait\u013cus",positive:"\u0160aj\u0101 lauci\u0146\u0101 var ievad\u012bt tikai pozit\u012bvus skait\u013cus",min:"\u0160\u012b lauci\u0146a v\u0113rt\u012bbai ir j\u0101b\u016bt liel\u0101kai vai vien\u0101dai ar ${min}",moreThan:"\u0160\u012b lauci\u0146a v\u0113rt\u012bbai ir j\u0101b\u016bt liel\u0101kai par ${more}",lessThan:"\u0160\u012b lauci\u0146a v\u0113rt\u012bbai ir j\u0101b\u016bt maz\u0101kai par ${less}"}});var E=function(){return Object(P.b)().positive().integer().transform((function(e,a){return""===String(a).trim()?void 0:e}))},D=function(e,a){return e?a.min(e):a},F=Object(P.c)().shape({email:Object(P.e)().email().required(),category:Object(P.a)().oneOf(["APARTMENT","HOUSE","LAND"]).required(),type:Object(P.a)().oneOf(["SELL","RENT"]).required(),price_min:E().required(),price_max:E().required().when("price_min",D).lessThan(1e7),rooms_min:E(),rooms_max:E().when("rooms_min",D).lessThan(20),area_m2_min:E(),area_m2_max:E().when("area_m2_min",D).when("category",(function(e,a){return a.lessThan("LAND"===e?1e6:1e3)})),region:Object(P.e)().required().matches(/^(-?[0-9]{1,3}\.[0-9]+ -?[0-9]{1,3}\.[0-9]+(, )?)+$/,{message:"L\u016bdzu izv\u0113lies re\u0123ionu"}),comments:Object(P.e)().max(255)}),q=[{value:"APARTMENT",text:"Dz\u012bvoklis"},{value:"HOUSE",text:"M\u0101ja"},{value:"LAND",text:"Zeme"}],L=[{value:"SELL",text:"P\u0101rdod"},{value:"RENT",text:"\u012ar\u0113"}];function z(e){return!!e&&{content:null===e||void 0===e?void 0:e.message,pointing:"below"}}function R(e){var a=Object(_.c)({resolver:Object(N.yupResolver)(F)}),n=a.control,i=a.handleSubmit,r=a.errors;return Object(A.jsxs)(O.a,{loading:e.loading,error:!!e.error,warning:!!e.warning,success:!!e.success,onSubmit:i(e.onSubmit),children:[Object(A.jsx)(_.a,{name:"email",control:n,defaultValue:"",render:function(e){return Object(A.jsx)(O.a.Field,{required:!0,id:"form-email-field",control:O.a.Input,label:"E-pasta adrese",placeholder:"john@doe.com",error:z(r.email),value:e.value,onChange:e.onChange})}}),Object(A.jsxs)(O.a.Group,{widths:"equal",children:[Object(A.jsx)(_.a,{name:"category",control:n,defaultValue:"APARTMENT",render:function(e){return Object(A.jsx)(O.a.Field,{required:!0,id:"form-category-field",control:O.a.Select,label:"Nekustam\u0101 \u012bpa\u0161uma tips",options:q,error:z(r.category),value:e.value,onChange:function(a,n){var i=n.value;return e.onChange(i)}})}}),Object(A.jsx)(_.a,{name:"type",control:n,defaultValue:"SELL",render:function(e){return Object(A.jsx)(O.a.Field,{required:!0,id:"form-type-field",control:O.a.Select,label:"Dar\u012bjuma veids",options:L,error:z(r.type),value:e.value,onChange:function(a,n){var i=n.value;return e.onChange(i)}})}})]}),Object(A.jsxs)(O.a.Group,{widths:"equal",children:[Object(A.jsx)(_.a,{name:"price_min",control:n,defaultValue:"",render:function(e){return Object(A.jsxs)(O.a.Field,{required:!0,error:!!r.price_min,children:[Object(A.jsx)("label",{htmlFor:"form-price-min-field",children:"Cena (min)"}),Object(A.jsxs)(O.a.Input,{id:"form-price-min-field",labelPosition:"right",type:"number",placeholder:"0",children:[Object(A.jsx)("input",{value:e.value,onChange:e.onChange}),Object(A.jsx)(y.a,{basic:!0,prompt:!!r.price_min,children:"EUR"})]}),r.price_min&&Object(A.jsx)(y.a,{prompt:!0,pointing:"above",id:"form-price-min-field-error-message",children:r.price_min.message})]})}}),Object(A.jsx)(_.a,{name:"price_max",control:n,defaultValue:"",render:function(e){return Object(A.jsxs)(O.a.Field,{required:!0,error:!!r.price_max,children:[Object(A.jsx)("label",{htmlFor:"form-price-max-field",children:"Cena (max)"}),Object(A.jsxs)(O.a.Input,{id:"form-price-max-field",labelPosition:"right",type:"number",placeholder:"1000",children:[Object(A.jsx)("input",{value:e.value,onChange:e.onChange}),Object(A.jsx)(y.a,{basic:!0,prompt:!!r.price_max,children:"EUR"})]}),r.price_max&&Object(A.jsx)(y.a,{prompt:!0,pointing:"above",id:"form-price-max-field-error-message",children:r.price_max.message})]})}})]}),Object(A.jsxs)(O.a.Group,{widths:"equal",children:[Object(A.jsx)(_.a,{name:"rooms_min",control:n,defaultValue:"",render:function(e){return Object(A.jsx)(O.a.Field,{control:O.a.Input,type:"number",id:"form-rooms-min-field",label:"Istabas (min)",placeholder:"1",error:z(r.rooms_min),value:e.value,onChange:e.onChange})}}),Object(A.jsx)(_.a,{name:"rooms_max",control:n,defaultValue:"",render:function(e){return Object(A.jsx)(O.a.Field,{control:O.a.Input,type:"number",id:"form-rooms-max-field",label:"Istabas (max)",placeholder:"3",error:z(r.rooms_max),value:e.value,onChange:e.onChange})}})]}),Object(A.jsxs)(O.a.Group,{widths:"equal",children:[Object(A.jsx)(_.a,{name:"area_m2_min",control:n,defaultValue:"",render:function(e){return Object(A.jsxs)(O.a.Field,{required:!0,error:!!r.area_m2_min,children:[Object(A.jsx)("label",{htmlFor:"form-area-m2-min-field",children:"Plat\u012bba (min)"}),Object(A.jsxs)(O.a.Input,{id:"form-area-m2-min-field",labelPosition:"right",type:"number",placeholder:"30",children:[Object(A.jsx)("input",{value:e.value,onChange:e.onChange}),Object(A.jsxs)(y.a,{basic:!0,prompt:!!r.area_m2_min,children:["m",Object(A.jsx)("sup",{children:"2"})]})]}),r.area_m2_min&&Object(A.jsx)(y.a,{prompt:!0,pointing:"above",id:"form-area-m2-min-field-error-message",children:r.area_m2_min.message})]})}}),Object(A.jsx)(_.a,{name:"area_m2_max",control:n,defaultValue:"",render:function(e){return Object(A.jsxs)(O.a.Field,{required:!0,error:!!r.area_m2_max,children:[Object(A.jsx)("label",{htmlFor:"form-area-m2-max-field",children:"Plat\u012bba (max)"}),Object(A.jsxs)(O.a.Input,{id:"form-area-m2-max-field",labelPosition:"right",type:"number",placeholder:"70",children:[Object(A.jsx)("input",{value:e.value,onChange:e.onChange}),Object(A.jsxs)(y.a,{basic:!0,prompt:!!r.area_m2_max,children:["m",Object(A.jsx)("sup",{children:"2"})]})]}),r.area_m2_max&&Object(A.jsx)(y.a,{prompt:!0,pointing:"above",id:"form-area-m2-max-field-error-message",children:r.area_m2_max.message})]})}})]}),Object(A.jsx)(_.a,{name:"region",control:n,defaultValue:"56.992294 24.136619, 56.976394 23.995790, 56.924904 24.005336, 56.889288 24.108467, 56.932211 24.291935, 56.996502 24.245176, 56.992294 24.136619",render:function(e){return Object(A.jsx)(O.a.Field,{required:!0,control:$,id:"form-region-field",label:"Re\u0123ions",error:z(r.region),value:e.value,onChange:e.onChange})}}),Object(A.jsx)(_.a,{name:"comments",control:n,defaultValue:"",render:function(e){return Object(A.jsx)(O.a.Field,{control:O.a.TextArea,id:"form-comments-field",label:"Koment\u0101ri",placeholder:"Ieteikumi, atsauksmes",error:z(r.comments),value:e.value,onChange:e.onChange})}}),e.error,e.warning,e.success,Object(A.jsx)(O.a.Field,{control:O.a.Button,primary:!0,type:"submit",role:"button",content:"Sa\u0146emt nek.\u012bp. pazi\u0146ojumus",formNoValidate:!0})]})}R.defaultProps={loading:!1,error:!1,success:!1};var M=n(227),G=n.n(M),H={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"createPinger"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"email"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"category"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Category"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Type"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"price_min"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"price_max"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"region"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rooms_min"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"rooms_max"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area_m2_min"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area_m2_max"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"comments"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createPinger"},arguments:[{kind:"Argument",name:{kind:"Name",value:"email"},value:{kind:"Variable",name:{kind:"Name",value:"email"}}},{kind:"Argument",name:{kind:"Name",value:"category"},value:{kind:"Variable",name:{kind:"Name",value:"category"}}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"Argument",name:{kind:"Name",value:"price_min"},value:{kind:"Variable",name:{kind:"Name",value:"price_min"}}},{kind:"Argument",name:{kind:"Name",value:"price_max"},value:{kind:"Variable",name:{kind:"Name",value:"price_max"}}},{kind:"Argument",name:{kind:"Name",value:"region"},value:{kind:"Variable",name:{kind:"Name",value:"region"}}},{kind:"Argument",name:{kind:"Name",value:"rooms_min"},value:{kind:"Variable",name:{kind:"Name",value:"rooms_min"}}},{kind:"Argument",name:{kind:"Name",value:"rooms_max"},value:{kind:"Variable",name:{kind:"Name",value:"rooms_max"}}},{kind:"Argument",name:{kind:"Name",value:"area_m2_min"},value:{kind:"Variable",name:{kind:"Name",value:"area_m2_min"}}},{kind:"Argument",name:{kind:"Name",value:"area_m2_max"},value:{kind:"Variable",name:{kind:"Name",value:"area_m2_max"}}},{kind:"Argument",name:{kind:"Name",value:"comments"},value:{kind:"Variable",name:{kind:"Name",value:"comments"}}}],directives:[]}]}}],loc:{start:0,end:523,source:{body:"mutation createPinger(\n  $email: String!\n  $category: Category!\n  $type: Type!\n  $price_min: Int!\n  $price_max: Int!\n  $region: String!\n  $rooms_min: Int\n  $rooms_max: Int\n  $area_m2_min: Int\n  $area_m2_max: Int\n  $comments: String\n) {\n  createPinger(\n    email: $email\n    category: $category\n    type: $type\n    price_min: $price_min\n    price_max: $price_max\n    region: $region\n    rooms_min: $rooms_min\n    rooms_max: $rooms_max\n    area_m2_min: $area_m2_min\n    area_m2_max: $area_m2_max\n    comments: $comments\n  )\n}",name:"GraphQL request",locationOffset:{line:1,column:1}}}};function B(e){var a,n;return(null===e||void 0===e||null===(a=e.graphQLErrors[0])||void 0===a||null===(n=a.extensions)||void 0===n?void 0:n.maxPingers)||0}var K=function(){var e=Object(i.useMutation)(H,{errorPolicy:"all"}),a=Object(g.a)(e,2),n=a[0],t=a[1],o=t.loading,l=t.error,m=t.data,d=Object(r.useCallback)((function(e){n({variables:e})}),[n]);return Object(A.jsx)(x.a,{text:!0,className:G.a.container,children:Object(A.jsxs)(h.a,{padded:!0,children:[Object(A.jsx)("h1",{children:"Brokalys pingeris"}),Object(A.jsx)("p",{children:"Aizpildi formu un sa\u0146em pazi\u0146ojumus e-past\u0101 par jauniem nekustam\u0101 \u012bpa\u0161uma sludin\u0101jumiem."}),Object(A.jsx)("hr",{}),Object(A.jsx)(R,{onSubmit:d,loading:o,error:l&&B(l)<=0&&Object(A.jsx)(f.a,{error:!0,header:"Kaut kas nog\u0101ja greizi",content:"Cent\u012bsimies atrisin\u0101t probl\u0113mu tuv\u0101kaj\u0101 laik\u0101."}),warning:l&&B(l)>0&&Object(A.jsxs)(f.a,{warning:!0,children:[Object(A.jsx)(f.a.Header,{children:"PINGERis nav izveidots"}),Object(A.jsxs)(f.a.Content,{children:["Diem\u017e\u0113l, vienai e-pasta adresei var pievienot tikai"," ",B(l)," N\u012a pazi\u0146ojumus"]})]}),success:m&&Object(A.jsx)(f.a,{success:!0,header:"PINGERis veiksm\u012bgi izveidots",content:"Turpm\u0101k sa\u0146emsi e-pastus par jauniem nekustamo \u012bpa\u0161umu sludin\u0101jumiem, kas atbilst tevis izv\u0113l\u0113tajiem krit\u0113rijiem."})})]})})};l.a.render(Object(A.jsx)(t.a.StrictMode,{children:Object(A.jsx)(k,{children:Object(A.jsx)(i.ApolloProvider,{client:p,children:Object(A.jsx)(K,{})})})}),document.getElementById("root"))}},[[361,1,2]]]);
//# sourceMappingURL=main.6599b5d4.chunk.js.map